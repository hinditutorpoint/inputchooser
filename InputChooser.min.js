/*! InputChooser v1.0.0 | MIT License | https://github.com/hinditutorpoint */
class InputChooser{constructor(e){this.dropzones=document.querySelectorAll(e),this.injectStyles(),this.dropzones.length>0&&this.init()}injectStyles(){if(document.getElementById("input-chooser-styles"))return;const e=document.createElement("style");e.id="input-chooser-styles",e.innerHTML=".dropzone-area{border:2px dashed #ccc;padding:20px;text-align:center;cursor:pointer;position:relative;width:100%;max-width:350px;margin:10px auto;border-radius:10px;transition:.3s}.dropzone-area:hover{border-color:blue}.dropzone-area.drag-over{border-color:blue;background-color:rgba(0,0,255,.1)}.hidden-input{display:none}.preview-container{position:relative;display:inline-block;margin-top:10px;max-width:100%}.preview-image{max-width:100%;height:auto;display:none;border:1px solid #ddd;padding:5px;border-radius:5px}.error-message{color:red;margin-top:5px;font-size:14px}.clear-button{display:none;position:absolute;top:-10px;right:-10px;background:red;color:white;border:none;cursor:pointer;font-size:14px;padding:6px;width:24px;height:24px;border-radius:50%;text-align:center;line-height:12px;box-shadow:0 2px 5px rgba(0,0,0,.2)}.clear-button:hover{background:darkred}",document.head.appendChild(e)}init(){this.dropzones.forEach(e=>{""===e.innerHTML.trim()&&(e.innerHTML="<p>Drag & drop your file here or</p><span style='color:blue;text-decoration:underline;'>click to upload</span>");const t=e.dataset.name||"file";let i=e.querySelector("input[type='file']");i||(i=document.createElement("input"),i.type="file",i.classList.add("hidden-input"),i.name=t,e.appendChild(i));let n=e.querySelector(".error-message");n||(n=document.createElement("div"),n.classList.add("error-message"),e.appendChild(n));let o=e.querySelector(".preview-container");o||(o=document.createElement("div"),o.classList.add("preview-container"),e.appendChild(o));let r=e.querySelector(".preview-image");r||(r=document.createElement("img"),r.classList.add("preview-image"),o.appendChild(r));let d=e.querySelector(".clear-button");d||(d=document.createElement("button"),d.type="button",d.classList.add("clear-button"),d.innerHTML="Ã—",o.appendChild(d),d.addEventListener("click",l=>{l.stopPropagation(),r.style.display="none",i.value="",d.style.display="none"}));const a=(e.dataset.type||"png,jpeg").split(",").map(e=>"image/"+e),s=1024*(e.dataset.size||2e3),c=e.dataset.width||500,p=e.dataset.height||500;e.addEventListener("click",e=>{e.target.classList.contains("clear-button")||i.click()}),i.addEventListener("change",function(){this.files.length>0&&InputChooser.handleFile(this.files[0],r,n,d,{allowedTypes:a,maxSize:s,maxWidth:c,maxHeight:p})}),e.addEventListener("dragover",e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",e.currentTarget.classList.add("drag-over")}),e.addEventListener("dragleave",e=>{e.currentTarget.classList.remove("drag-over")}),e.addEventListener("drop",e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.classList.remove("drag-over");const t=e.dataTransfer.files;t.length>0&&(i.files=t,InputChooser.handleFile(t[0],r,n,d,{allowedTypes:a,maxSize:s,maxWidth:c,maxHeight:p}))})})}static handleFile(e,t,i,n,o){InputChooser.validateFile(e,o).then(()=>{i.textContent="";const o=new FileReader;o.onload=e=>{t.src=e.target.result,t.style.display="block",n.style.display="block"},o.readAsDataURL(e)}).catch(e=>{i.textContent=e,t.style.display="none",n.style.display="none"})}static validateFile(e,{allowedTypes:t,maxSize:i,maxWidth:n,maxHeight:o}){return new Promise((r,d)=>{if(!t.includes(e.type))return d(`Invalid file type. Allowed: ${t.join(", ").replace(/image\//g,"")}`);if(e.size>i)return d(`File size exceeds ${i/1024}KB.`);const a=new Image;a.src=URL.createObjectURL(e),a.onload=function(){a.width>n||a.height>o?d(`Image dimensions should be ${n}x${o} or smaller.`):r()}})}}
