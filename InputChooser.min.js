/*! InputChooser v1.0.1 | (c) hinditutorpoint | MIT License | https://github.com/hinditutorpoint */
class InputChooser{constructor(e,t={}){this.dropzones=document.querySelectorAll(e),this.options={maxFiles:t.maxFiles||1,multiSelect:t.multiSelect||!1,customExtensions:t.customExtensions||[],...t},this.injectStyles(),this.dropzones.length>0&&this.init()}injectStyles(){if(!document.getElementById("input-chooser-styles")){const e=document.createElement("style");e.id="input-chooser-styles",e.innerHTML='.dropzone-area{border:2px dashed #d1d5db;padding:2rem;text-align:center;cursor:pointer;position:relative;width:100%;max-width:600px;margin:1rem auto;border-radius:.5rem;transition:all .3s ease;background-color:#f9fafb}.dropzone-area:hover{border-color:#3b82f6;background-color:#f0f7ff}.dropzone-area.drag-over{border-color:#3b82f6;background-color:#ebf5ff;box-shadow:0 0 0 3px rgba(59,130,246,.2)}.dropzone-area .dropzone-content{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.5rem}.dropzone-area .dropzone-icon{font-size:2.5rem;color:#3b82f6;margin-bottom:.5rem}.dropzone-area .dropzone-text{color:#4b5563;font-size:1rem;margin:0}.dropzone-area .dropzone-hint{color:#6b7280;font-size:.875rem;margin:0}.dropzone-area .dropzone-button{color:#3b82f6;background:0 0;border:none;cursor:pointer;font-size:.875rem;text-decoration:underline;margin-top:.5rem}.hidden-input{display:none}.preview-container{display:flex;flex-wrap:wrap;gap:1rem;margin-top:1.5rem;width:100%}.preview-item{position:relative;border:1px solid #e5e7eb;border-radius:.375rem;padding:.75rem;background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.1);width:calc(33.333% - 1rem);min-width:120px;transition:all .2s ease}.preview-item:hover{transform:translateY(-2px);box-shadow:0 4px 6px rgba(0,0,0,.1)}.preview-thumbnail{width:100%;height:100px;object-fit:contain;display:flex;align-items:center;justify-content:center;margin-bottom:.5rem;overflow:hidden}.preview-thumbnail img{max-width:100%;max-height:100%}.preview-thumbnail .file-icon{font-size:2.5rem;color:#6b7280}.preview-info{text-align:center;font-size:.75rem;color:#4b5563;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.preview-info .file-name{font-weight:500;margin-bottom:.25rem}.preview-info .file-size{color:#6b7280}.clear-button{position:absolute;top:-.5rem;right:-.5rem;background:#ef4444;color:#fff;border:none;border-radius:50%;width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:.875rem;line-height:1;padding:0;box-shadow:0 1px 3px rgba(0,0,0,.2);transition:all .2s ease}.clear-button:hover{background:#dc2626;transform:scale(1.1)}.error-message{color:#ef4444;margin-top:.5rem;font-size:.875rem;text-align:center}.progress-container{width:100%;background-color:#e5e7eb;border-radius:.25rem;margin-top:.5rem;overflow:hidden;display:none}.progress-bar{height:.5rem;background-color:#3b82f6;width:0;transition:width .3s ease}@media (max-width:640px){.preview-item{width:calc(50% - 1rem)}}',document.head.appendChild(e)}}getFileIcon(e){const t={'image/':'🖼️','application/pdf':'📄','application/msword':'📝','application/vnd.openxmlformats-officedocument.wordprocessingml.document':'📝','application/vnd.ms-excel':'📊','application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':'📊','application/vnd.ms-powerpoint':'📑','application/vnd.openxmlformats-officedocument.presentationml.presentation':'📑','text/plain':'📄','text/csv':'📊','application/zip':'🗄️','application/x-rar-compressed':'🗄️','application/x-7z-compressed':'🗄️','application/x-tar':'🗄️','application/x-gzip':'🗄️','audio/':'🎵','video/':'🎬','default':'📁'};for(const[n,i]of Object.entries(t))if(e.startsWith(n))return i;return t.default}formatFileSize(e){if(0===e)return'0 Bytes';const t=1024,n=['Bytes','KB','MB','GB'],i=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,i)).toFixed(2))+' '+n[i]}init(){this.dropzones.forEach(e=>{if(""===e.innerHTML.trim()&&(e.innerHTML='<div class="dropzone-content"><div class="dropzone-icon">📁</div><p class="dropzone-text">Drag & drop files here</p><p class="dropzone-hint">or</p><button type="button" class="dropzone-button">Browse files</button></div><div class="preview-container"></div><div class="error-message"></div><div class="progress-container"><div class="progress-bar"></div></div>'),!e.querySelector("input[type='file']")){const t=document.createElement("input");t.type="file",t.classList.add("hidden-input"),t.name=e.dataset.name||"file",this.options.multiSelect&&(t.multiple=!0),e.appendChild(t)}let t=e.querySelector(".error-message");t||(t=document.createElement("div"),t.classList.add("error-message"),e.appendChild(t));let n=e.querySelector(".preview-container");n||(n=document.createElement("div"),n.classList.add("preview-container"),e.appendChild(n));let i=e.querySelector(".progress-container");i||(i=document.createElement("div"),i.classList.add("progress-container");const r=document.createElement("div");r.classList.add("progress-bar"),i.appendChild(r),e.appendChild(i);const o=e.dataset.type?e.dataset.type.split(",").map(e=>e.trim()):["image/*","audio/*","video/*","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-rar-compressed"],s=e.dataset.size?parseInt(e.dataset.size)*1024:10485760;e.addEventListener("click",t=>{t.target.classList.contains("clear-button")||t.target.classList.contains("preview-item")||t.target.closest(".preview-item")||e.querySelector("input[type='file']").click()}),e.querySelector("input[type='file']").addEventListener("change",()=>{e.querySelector("input[type='file']").files.length>0&&this.handleFiles(e.querySelector("input[type='file']").files,e,n,t,{allowedTypes:o,maxSize:s})}),e.addEventListener("dragover",e=>{e.preventDefault(),e.currentTarget.classList.add("drag-over")}),e.addEventListener("dragleave",e=>{e.currentTarget.classList.remove("drag-over")}),e.addEventListener("drop",e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over"),e.dataTransfer.files.length>0&&(e.currentTarget.querySelector("input[type='file']").files=e.dataTransfer.files,this.handleFiles(e.dataTransfer.files,e,n,t,{allowedTypes:o,maxSize:s}))})})}handleFiles(e,t,n,i,r){i.textContent="",this.options.maxFiles>0&&e.length>this.options.maxFiles&&(i.textContent=`Maximum ${this.options.maxFiles} file(s) allowed.`),this.options.multiSelect||(n.innerHTML=""),Array.from(e).forEach(e=>{this.validateFile(e,r).then(()=>{this.createPreview(e,n)}).catch(e=>{i.textContent=e})})}createPreview(e,t){const n=document.createElement("div");n.classList.add("preview-item");const i=document.createElement("div");i.classList.add("preview-thumbnail");const r=document.createElement("div");r.classList.add("preview-info");const o=document.createElement("div");o.classList.add("file-name"),o.textContent=e.name.length>20?e.name.substring(0,17)+"...":e.name;const s=document.createElement("div");s.classList.add("file-size"),s.textContent=this.formatFileSize(e.size);const a=document.createElement("button");a.type="button",a.classList.add("clear-button"),a.innerHTML="×",a.addEventListener("click",e=>{e.stopPropagation(),e.currentTarget.parentElement.remove()}),r.appendChild(o),r.appendChild(s),n.appendChild(i),n.appendChild(r),n.appendChild(a),e.type.startsWith("image/")?(new FileReader).onload=e=>{const t=document.createElement("img");t.src=e.target.result,i.appendChild(t)},(new FileReader).readAsDataURL(e):e.type.startsWith("video/")?(e=>{const t=document.createElement("video");t.controls=!0,t.muted=!0,t.src=URL.createObjectURL(e),t.style.maxHeight="100%",t.style.maxWidth="100%",i.appendChild(t)})(e):e.type.startsWith("audio/")?(e=>{const t=document.createElement("audio");t.controls=!0,t.src=URL.createObjectURL(e),i.appendChild(t)})(e):(e=>{const t=document.createElement("div");t.classList.add("file-icon"),t.textContent=this.getFileIcon(e.type),i.appendChild(t)})(e),t.appendChild(n)}validateFile(e,t){return new Promise((n,i)=>{if(e.size>t.maxSize)return i(`File size exceeds ${this.formatFileSize(t.maxSize)}`);const r=e.name.split(".").pop().toLowerCase();if(this.options.customExtensions.length>0&&this.options.customExtensions.some(e=>(e.startsWith(".")?e.substring(1):e).toLowerCase()===r))return n();let o=!1;for(const n of t.allowedTypes)if(n.endsWith("/*")){if(e.type.startsWith(n.replace("/*","/")))){o=!0;break}}else if(e.type===n){o=!0;break}else if(n.startsWith(".")){const t=n.substring(1);if(r===t.toLowerCase()){o=!0;break}}o?n():i(`File type not allowed. Allowed types: ${t.allowedTypes.join(", ")}${this.options.customExtensions.length>0?" or extensions: "+this.options.customExtensions.join(", "):""}`)})}uploadFiles(e,t){return new Promise((n,i)=>{console.log("Upload functionality would be implemented here"),n()})}}document.addEventListener("DOMContentLoaded",function(){new InputChooser(".dropzone-area",{maxFiles:5,multiSelect:!0})});